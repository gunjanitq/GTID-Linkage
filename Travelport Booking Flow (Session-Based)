ðŸ”¹ Travelport Booking Flow (Session-Based)

When working with Travelport APIs (uAPI), creating a booking is a multi-step process, where each request builds upon the previous one using a Session Key (Session Token).

1. Start Booking Session

API: BookingStartReq

Purpose: Start a session with Travelport for the branch youâ€™re targeting.

Input: Branch code (PCC), target branch ID.

Output: Session Key (like a session ID).

This session key must be carried forward in all subsequent requests.

2. Add Air Segments

API: AirCreateReservationReq (older) or BookingAirSegmentReq.

Purpose: Add flight segments into the PNR.

Input:

Air Segment Key (from AirPriceShop / AirAvailability response)

Last Line Number

Party size (number of passengers)

Output:

Session ID (carried forward, often twice as per your notes)

Air Segment Reference

3. Add Traveller Information

API: BookingTravelerReq or included in AirCreateReservationReq.

Purpose: Attach passenger details.

Input:

Passenger names

Date of birth, gender, type (ADT, CHD, INF)

Note: Each traveler gets a Traveler Key which must be used in pricing and ticketing later.

4. Pricing Request

API: AirPriceReq or BookingPricingReq.

Purpose: Get the fare, rules, penalties, and confirm pricing.

Input:

Session Key

Air Segment Keys

Traveler Keys

Additional:

Add Modifiers (e.g., Brand modifiers, Cabin preference, Penalty checks).

Remove host tokens (temporary data from booking info).

Output:

Air Pricing Solution (with fare basis, brand details, taxes, penalties).

Booking Pricing Reference Key.

5. Review Cancel Penalty (Optional)

At this point, you can:

Check refund/cancellation policies.

Apply AirPricingModifiers (like low-cost carrier rules, branded fares).

6. Finalize Reservation

Remove unnecessary tokens/keys (like Brand Key if not needed).

Confirm the reservation with all pricing details.

Store PNR â†’ a Locator Code (record locator) is returned.

7. Issue Ticket

API: AirTicketingReq

Input: PNR Locator Code, form of payment (FOP), PCC.

Output: E-ticket number(s).

ðŸ”‘ Notes from Your Image

Session Key is reused multiple times (at least twice).

Air Segment Key (SegRef) is crucial to connect search results â†’ booking.

Booking Traveler Key must match PAX types.

After cancel penalty â†’ add AirPricingModifier.

Remove after Brand Key â†’ means cleaning up extra XML tags before commit.

ðŸ”„ End-to-End Flow in Order

BookingStartReq â†’ Get Session Key

BookingAirSegmentReq â†’ Add flight segments

BookingTravelerReq â†’ Add passenger details

BookingPricingReq â†’ Get confirmed pricing & rules

(Optional) Apply cancel penalty / modifiers

Commit booking â†’ Receive PNR

AirTicketingReq â†’ Issue tickets
